/*! For license information please see main.bce2dc47.chunk.js.LICENSE.txt */
(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[0],{123:function(e,t,n){e.exports={User:"Users_User__1O4em"}},151:function(e,t,n){e.exports=n(277)},156:function(e,t,n){},16:function(e,t,n){e.exports={Error:"FormControls_Error__iQfA6",ErrorSpan:"FormControls_ErrorSpan__2CDXA",Input:"FormControls_Input__m1qpb",ShowLabel:"FormControls_ShowLabel__2AQOz"}},276:function(e,t,n){},277:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(60),c=n.n(s),o=(n(156),n(62)),i=n.n(o),u=n(47),l=n(15),m=n(11),f=n(117),d=n(118),p=n(16),b=n.n(p),E=n(86),v=function(e){var t=e.input,n=e.meta,r=Object(E.a)(e,["input","meta"]),s=n.error&&n.touched;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:b.a.Input},a.a.createElement("input",Object.assign({},t,r,{className:s?b.a.Error:""}))),s&&a.a.createElement("div",null,a.a.createElement("span",{className:b.a.ErrorSpan},n.error)))},h=function(e){var t=e.input,n=e.meta,r=Object(E.a)(e,["input","meta"]),s=n.error&&n.touched;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:b.a.Input},a.a.createElement("input",Object.assign({},t,r,{className:s?b.a.Error:""})),a.a.createElement("span",{onClick:function(){r.setType("password"===r.type?"text":"password")},className:b.a.ShowLabel},"Show")),s&&a.a.createElement("div",null,a.a.createElement("span",{className:b.a.ErrorSpan},n.error)))},_=function(e){if(!e)return"This field is required"},w=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}},g=function(e){if(!/^[\w.@+-]+$/.test(e))return"Entered incorrect data."},O=function(e){if(!/^(?=.*[A-Z])(?=.*\d).{8,}$/.test(e))return"Entered incorrect data."},j=n(12),U=n.n(j),S=n(23),P=n(9),y=n(121),A=n(34),k=[{id:1,username:"Roma_roma",first_name:"Roma",last_name:"Kucherenko",password:"testUserPassword1",isActive:!0},{id:2,username:"Dima600kg",first_name:"Dmitry",last_name:"Golubochkin",password:"testUserPassword2",isActive:!0},{id:3,username:"BigRonnie",first_name:"Ronnie",last_name:"Coleman",password:"testUserPassword3",isActive:!0},{id:4,username:"Ingvar",first_name:"Igor",last_name:"Voitenko",password:"testUserPassword4",isActive:!0},{id:5,username:"Yuriy_104",first_name:"Yuriy",last_name:"Thursday",password:"testUserPassword5",isActive:!0},{id:6,username:"Adil_Jalelov",first_name:"Adil",last_name:"Jalelov",password:"testUserPassword6",isActive:!0},{id:7,username:"DimaBicepcs",first_name:"Dima",last_name:"Biceps",password:"testUserPassword7",isActive:!0},{id:8,username:"IvanKrasavin",first_name:"Ivan",last_name:"Krasavin",password:"testUserPassword8",isActive:!0},{id:9,username:"26_Oleg_26",first_name:"Oleg",last_name:"Nechiporenko",password:"testUserPassword9",isActive:!0},{id:10,username:"DenisFit4Life",first_name:"Denis",last_name:"Borisov",password:"testUserPassword10",isActive:!0}],L=function(e){return new Promise((function(t,n){e?t({data:Object(A.a)(k).sort((function(e,t){return.5-Math.random()})),code:200}):n({code:401,error:"You are not authorized"})}))},N=function(e){return new Promise((function(t,n){t({userData:k.map((function(t){if(t.id==e)return t})).filter((function(e){return e}))[0],code:200})}))},x=function(e){return new Promise((function(t,n){var r=k.map((function(e){return e.username}));console.log(e.username,r),r.includes(e.username)?n({error:"We already have user with this username",code:400}):(!function(e){k.push(Object(P.a)({id:k.length+1},e))}(e),t({code:200,data:k[k.length-1]}))}))},C=function(e){return new Promise((function(t,n){!function(e){k=k.map((function(t){return t.id==e.id?Object(P.a)(Object(P.a)({},e),{},{password:t.password}):t}))}(e),t({userData:e})}))};window.Users=k;var D=y.create({baseURL:"https://emphasoft-test-assignment.herokuapp.com/"}),I=function(e,t){return D.post("api-token-auth/",{username:e,password:t}).then((function(e){return e}),(function(e){return e.response.status}))},T=function(){var e=Object(S.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(S.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=n(28),B={isAuth:!1,token:null},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTH_DATA":return Object(P.a)(Object(P.a)({},e),{},{token:t.token,isAuth:!0});default:return e}},W=n(35),q=n.n(W),z=n(6),Z=w(150),M=w(128),Y=Object(d.a)({form:"login"})((function(e){var t,n=Object(r.useState)("password"),s=Object(l.a)(n,2),c=s[0],o=s[1];return a.a.createElement("form",{onSubmit:e.handleSubmit,className:q.a.LoginForm},a.a.createElement("div",{className:q.a.LoginInputWrapper},a.a.createElement(f.a,{component:v,validate:[_,g,Z],name:"username",placeholder:"Login"})),a.a.createElement("div",{className:q.a.LoginInputWrapper},a.a.createElement(f.a,(t={component:h,type:"text",name:"password",placeholder:"Password",validate:[_,O,M]},Object(u.a)(t,"type",c),Object(u.a)(t,"setType",o),t))),e.error?a.a.createElement("span",{className:b.a.Error},e.error):null,a.a.createElement("div",null,a.a.createElement("button",{disabled:e.isSubmitting,className:q.a.LoginSubmitButton},"\u0412\u043e\u0439\u0442\u0438 \u0432 IT")))})),H=Object(z.d)(Object(m.b)(null,{login:function(e,t){return function(){var n=Object(S.a)(U.a.mark((function n(r){var a;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I(e,t);case 2:400===(a=n.sent)?r(Object(R.a)("login",{_error:"Incorrect Username/Password"})):200===a.status&&r({type:"SET_AUTH_DATA",token:a.data.token});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}))((function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),s=n[0],c=n[1];return a.a.createElement("div",{className:q.a.Login},a.a.createElement("h1",{className:q.a.LoginHeading},"Login"),a.a.createElement(Y,{onSubmit:function(t){c(!0);var n=t.username,r=t.password;e.login(n,r).finally((function(e){c(!1)})).then((function(){e.history.push("/Users")}))},setSubmitting:c,isSubmitting:s}))})),G={users:[]},J=function(e){return{type:"SET_USERS",users:e}},K=function(e){return{type:"ADD_NEW_USER",userData:e}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(P.a)(Object(P.a)({},e),{},{users:Object(A.a)(t.users)});case"ADD_NEW_USER":return Object(P.a)(Object(P.a)({},e),{},{users:[].concat(Object(A.a)(e.users),[t.userData])});default:return e}},Q=n(123),X=n.n(Q),ee=n(20),te=function(e){return a.a.createElement("div",{className:X.a.User},a.a.createElement(ee.b,{to:"/Profile/"+e.id},a.a.createElement("img",{src:"https://static2.clutch.co/s3fs-public/logos/de2c8bde806ea56b7e405a9a86a501be.png?m.QYppUsaGYggvTPcXhRKy0uiVPMYv4Z"})),a.a.createElement("div",null,a.a.createElement("span",null,e.username,", ",e.id)),a.a.createElement("div",null,e.first_name," ",e.last_name))},ne=Object(m.b)((function(e){return{users:e.users.users}}),{requestUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"781bd9f1de084f4daa7ba2aa8a71a2eab855354e";return function(){var t=Object(S.a)(U.a.mark((function t(n){var r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(e);case 2:200===(r=t.sent).code?n(J(r.data)):401===r.code&&console.log(r.error);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(r.useState)(e.users),n=Object(l.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)(""),i=Object(l.a)(o,2),u=i[0],m=i[1];!function(e){Object(r.useEffect)((function(){e.requestUsers(e.token)}),[])}(e),Object(r.useEffect)((function(){c(e.users)}),[e.users]);var f=s.map((function(e){return a.a.createElement(te,{id:e.id,username:e.username,first_name:e.first_name,last_name:e.last_name})}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement("input",{value:u,onChange:function(t){var n,r;m(t.target.value),c((n=e.users,r=t.target.value,n.filter((function(e){return e.username.includes(r)}))))},placeholder:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0432\u0432\u043e\u0434\u0438\u0442\u044c Username"}),a.a.createElement("button",{onClick:function(){c(function(e){var t,n=function(e,t){return e.num-t.num},r=Object.values(e.reduce((function(e,t){var n=t.id;return n in e?e[n].push(t):e[n]=[t],e}),{})).map((function(e){return e.sort(n)})).sort((function(e,t){return e[0].num-t[0].num}));return(t=[]).concat.apply(t,Object(A.a)(r))}(s))}},"Sort By Id"),a.a.createElement(ee.b,{to:"/Users/create"},a.a.createElement("button",null,"Create new User"))),a.a.createElement("div",{className:"Users"},f))})),re=n(10),ae={userProfile:null},se=function(e){return{type:"UPDATE_USER",userData:e}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_PROFILE":return Object(P.a)(Object(P.a)({},e),{},{userProfile:Object(P.a)({},t.userProfile)});case"UPDATE_USER":return Object(P.a)(Object(P.a)({},e),{},{userProfile:Object(P.a)({},t.userData)});default:return e}},oe=function(e){if(!e)return"This field is required"},ie=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}},ue=function(e){if(!/^[\w.@+-]+$/.test(e))return"Entered incorrect data. Use only Letters, digits and @/./+/-/_ "},le=function(e){if(!/^[a-zA-Z]+$/.test(e))return"\u0422\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b."},me=function(e){if(!/^[a-zA-Z]+$/.test(e))return"\u0422\u043e\u043b\u044c\u043a\u043e \u0431\u0443\u043a\u0432\u044b."},fe=n(125),de=ie(150),pe=ie(30),be=Object(z.d)(Object(m.b)((function(e){return{initialValues:{username:e.profile.userProfile.username,first_name:e.profile.userProfile.first_name,last_name:e.profile.userProfile.last_name}}}),{}),Object(d.a)({form:"editProfile"}))((function(e){return a.a.createElement("form",{onSubmit:e.handleSubmit},a.a.createElement("div",null,"Username:",a.a.createElement(f.a,{component:v,validate:[oe,ue],name:"username",placeholder:"Username"}),"\u0418\u043c\u044f:",a.a.createElement(f.a,{component:v,validate:[oe,pe,le],name:"first_name",placeholder:"\u0418\u043c\u044f"}),"\u0424\u0430\u043c\u0438\u043b\u0438\u044f:",a.a.createElement(f.a,{component:v,validate:[oe,de,me],name:"last_name",placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"})),e.error?a.a.createElement("span",{className:b.a.Error},e.error):null,a.a.createElement("div",null,a.a.createElement("button",{disabled:e.isSubmitting},"Save Changes"),a.a.createElement("button",{onClick:function(t){t.preventDefault(),e.onCancelClick()}},"CANCEL")))})),Ee=function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),s=n[0],c=n[1];return a.a.createElement(be,{onSubmit:function(t){c(!0);var n=e.userProfile,r=n.username,a=n.first_name,s=n.last_name;fe.a({username:r,first_name:a,last_name:s},t)?(c(!1),e.onSuccess()):e.updateUser(Object(P.a)(Object(P.a)({},t),{},{id:e.userId})).then((function(){c(!1),e.onSuccess()}))},isSubmitting:s,onCancelClick:e.onCancelClick})},ve=Object(z.d)(re.e,Object(m.b)((function(e){return{userProfile:e.profile.userProfile}}),{requestUserProfile:function(e){return function(){var t=Object(S.a)(U.a.mark((function t(n){var r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(e);case 2:200===(r=t.sent).code?n({type:"SET_USER_PROFILE",userProfile:r.userData}):r.code;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateUser:function(e){return function(){var t=Object(S.a)(U.a.mark((function t(n){var r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(e);case 2:r=t.sent,n(se(r.userData));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}))((function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),s=n[0],c=n[1];return Object(r.useEffect)((function(){e.requestUserProfile(e.match.params.userId)}),[]),e.userProfile?a.a.createElement("div",null,a.a.createElement("div",{className:"userForm"},s?a.a.createElement(Ee,{userProfile:e.userProfile,updateUser:e.updateUser,onCancelClick:function(){c(!1)},onSuccess:function(){c(!1)},userId:e.match.params.userId}):a.a.createElement("div",null,a.a.createElement("div",null,"Username: ",e.userProfile.username),a.a.createElement("div",null,"\u0418\u043c\u044f: ",e.userProfile.first_name),a.a.createElement("div",null,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f: ",e.userProfile.last_name),a.a.createElement("button",{onClick:function(){return c(!0)}},"Edit"))),a.a.createElement(ee.b,{to:"/Users"},a.a.createElement("button",null,"Back to Users"))):a.a.createElement("div",null,"...Loading...")})),he=(n(276),function(e){if(!e)return"This field is required"}),_e=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}},we=function(e){if(!/^[\w.@+-]+$/.test(e))return"Entered incorrect data. Use only Letters, digits and @/./+/-/_ "},ge=function(e){if(!/^[a-zA-Z]+$/.test(e))return"\u0422\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b."},Oe=function(e){if(!/^[a-zA-Z]+$/.test(e))return"\u0422\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b."},je=function(e){if(!/^(?=.*[A-Z])(?=.*\d).{8,}$/.test(e))return"\u0414\u043b\u0438\u043d\u0430 \u043f\u0430\u0440\u043e\u043b\u044f 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, 1 \u0446\u0438\u0444\u0440\u0430, 1 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0430\u044f."},Ue=function(e){var t={};return e.confirmPassword!==e.password&&(t.confirmPassword="Password mismatched"),t},Se=_e(150),Pe=_e(30),ye=Object(z.d)(Object(d.a)({form:"createUser",validate:Ue}))((function(e){var t=Object(r.useState)("password"),n=Object(l.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)("password"),i=Object(l.a)(o,2),u=i[0],m=i[1];return a.a.createElement("form",{onSubmit:e.handleSubmit},a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"username"},"Username:"),a.a.createElement(f.a,{component:v,validate:[he,we,Se],name:"username",id:"username",placeholder:"Username"})),a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"first_name"},"\u0418\u043c\u044f:"),a.a.createElement(f.a,{component:v,validate:[he,Pe,ge],name:"first_name",id:"first_name",placeholder:"\u0418\u043c\u044f"})),a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"last_name"},"\u0424\u0430\u043c\u0438\u043b\u0438\u044f:"),a.a.createElement(f.a,{component:v,validate:[he,Se,Oe],name:"last_name",id:"last_name",placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"})),a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c:"),a.a.createElement(f.a,{component:h,validate:[he,Se,je],name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",id:"password",type:u,setType:m})),a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"confirmPassword"},"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:"),a.a.createElement(f.a,{component:h,validate:[he,Se,je],name:"confirmPassword",id:"confirmPassword",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",type:s,setType:c}))),e.error?a.a.createElement("span",{className:b.a.Error},e.error):null,a.a.createElement("div",null,a.a.createElement("button",{disabled:e.isSubmitting},"CreateUser")))})),Ae=Object(re.e)((function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),s=n[0],c=n[1];return a.a.createElement(ye,{onSubmit:function(t){e.createNewUser(t).then((function(t){t&&e.history.push("/Users")}))},setSubmitting:c,isSubmitting:s})})),ke=Object(m.b)(null,{createNewUser:function(e){return function(){var t=Object(S.a)(U.a.mark((function t(n){var r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T(e);case 3:if(200!==(r=t.sent).code){t.next=7;break}return n(K(r.data)),t.abrupt("return",!0);case 7:t.next=14;break;case 9:if(t.prev=9,t.t0=t.catch(0),400!==t.t0.code){t.next=14;break}return n(Object(R.a)("createUser",{_error:t.t0.error})),t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){return a.a.createElement("div",null,a.a.createElement(Ae,{createNewUser:e.createNewUser}),a.a.createElement(ee.b,{to:"/Users"},a.a.createElement("button",null,"Back to Users")))})),Le=Object(z.d)(re.e,Object(m.b)((function(e){return{isAuth:e.auth.isAuth,token:e.auth.token}}),null))((function(e){return a.a.createElement("div",{className:i.a.App},e.isAuth?a.a.createElement("div",{className:i.a.App},a.a.createElement(re.a,{exact:!0,path:"/Users",render:function(){return a.a.createElement(ne,null)}}),a.a.createElement(re.a,{path:"/Profile/:userId",render:function(){return a.a.createElement(ve,null)}}),a.a.createElement(re.a,{path:"/Users/create",render:function(){return a.a.createElement(ke,null)}})):a.a.createElement(H,{history:e.history}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ne=n(119),xe=n(124),Ce=Object(z.c)({form:Ne.a,users:V,profile:ce,auth:$}),De=Object(z.e)(Ce,Object(z.a)(xe.a));window.store=De;var Ie=De;c.a.render(a.a.createElement(ee.a,null,a.a.createElement(m.a,{store:Ie},a.a.createElement(Le,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},35:function(e,t,n){e.exports={Login:"Login_Login__3zNGw",LoginForm:"Login_LoginForm__26Utr",LoginHeading:"Login_LoginHeading__z_lmw",LoginInputWrapper:"Login_LoginInputWrapper__1bgBZ",LoginSubmitButton:"Login_LoginSubmitButton__1httV"}},62:function(e,t,n){e.exports={App:"App_App__1GlMj"}}},[[151,1,2]]]);
//# sourceMappingURL=main.bce2dc47.chunk.js.map